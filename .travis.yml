language: python
notifications:
  email: false
env:
  global:
  - GH_REF: github.com/paulmueller/ODTbrain.git
  - secure: NjTvIIob7AShaLdMLwGJSOeJzEEODXVtahUwRMkE1r0VOd2ZuXutY0f+ZzI8bFOS8QZq310o2FSpVZiu/mQvciQWaDNOHpc8f9IZvdKarCYiN89klDJdHSnXLontiEy7vduozVORXsP31j29n9iKQZgWiQeOyHSt9xNj8ZpKx7HZCwnHNO+ViKBQbGKAJ7Um5xB5o23W2FZGpiK03RnidAievflf9r2I8yD5BPVEXcVPvGhi0kLcIntqGD3fN4HTC0vY2oRo4OCZSyJ4f+rcF0hhuEWj2sXv23nJ+Bv0Zm8D8x7wxCOYF/VfSHv1kwi5aSmGLgKK0Trvug6OgFLTDzYGkUZwIaKMN04P3H/BIxuQ92FEBJ2ycfg8+Wcmb9j4PyO0mZUT5tnJyM7sMAveFGSKabEwyaG9+69O3UQeTgB6T7DfD3XrGysdpYfV6eYgadWhXfqWehOZiWiOOLd31awBRX4yzTAzrea1ozxXR4VeNRRoq9SIex/4QtvmQC1KSSx8lLwePEqozKv1cxYd2GmMqGffx6XsbetUec3x7RtGPOfw3B4q2jQ+J/VsdmRc1bevmILucdeX4v0gyt0S5XfBilwDU5T6l1r/mfhQk+Mjupq5Q37ZwnEkL2Yx7PeOGyie5H4Syjefg0NU925Eyd/Yj9b7RBnnJvvz4xoAHVk=
python:
- '2.7'
- '3.4'
before_install:
- sudo apt-get update -qq
- sudo apt-get install -qq libfftw3-3 libfftw3-dev
- wget https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
- chmod +x miniconda.sh
- ./miniconda.sh -b
- export PATH=/home/travis/miniconda/bin:$PATH
- conda update --yes conda
- travis_retry conda install --yes python=$TRAVIS_PYTHON_VERSION pip numpy scipy cffi
  sphinx
- travis_retry pip install .
install:
- travis_retry pip install coverage
- travis_retry pip install coveralls
- pip freeze
script:
- coverage run --source=odtbrain tests/runtests.py
- coverage report -m
after_success:
- coveralls --verbose
- if [[ $TRAVIS_PYTHON_VERSION == 2.7 ]]; then pip install numpydoc; fi
- if [[ $TRAVIS_PYTHON_VERSION == 2.7 ]]; then python doc/deploy_ghpages.py; fi
